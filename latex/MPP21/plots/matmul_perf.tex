%!TEX root = ../paper.tex


\begin{tikzpicture}
\begin{axis}[
	width=.35\textwidth,
	xlabel=Dimension, 
	ylabel=Effective GFLOPS, 
	reverse legend,
        legend style={at={(1.02,.5)},anchor=west},
        xtick={512,2048,4096,6144,8192},
        /pgf/number format/.cd, 1000 sep={}
]
\draw[dotted] (axis cs: 512,32*\threads)--(axis cs: 8192,32*\threads);
\addplot[color=black] table[x=n, y=gemm]{\datafile}; \addlegendentry{Classical}
\addplot table[x=n, y=322]{\datafile}; \addlegendentry{$\dims{3,2,2}$}
\addplot table[x=n, y=333-21]{\datafile}; \addlegendentry{$\dims{3,3,3;21}$}
\addplot table[x=n, y=422]{\datafile}; \addlegendentry{$\dims{4,2,2}$}
\addplot table[x=n, y=332]{\datafile}; \addlegendentry{$\dims{3,3,2}$}
\addplot table[x=n, y=522]{\datafile}; \addlegendentry{$\dims{5,2,2}$}
\addplot table[x=n, y=442]{\datafile}; \addlegendentry{$\dims{4,4,2}$}
\addplot table[x=n, y=433]{\datafile}; \addlegendentry{$\dims{4,3,3}$}
\addplot table[x=n, y=552]{\datafile}; \addlegendentry{$\dims{5,5,2}$}
\addplot table[x=n, y=444]{\datafile}; \addlegendentry{$\dims{4,4,4}$}
\addplot table[x=n, y=555]{\datafile}; \addlegendentry{$\dims{5,5,5}$}
\addplot[color=red,mark=triangle] table[x=n, y=722]{\datafile}; \addlegendentry{$\dims{7,2,2}$}
\addplot[color=brown,mark=diamond] table[x=n, y=333-20]{\datafile}; \addlegendentry{$\dims{3,3,3;20}$}
\end{axis}
\end{tikzpicture}
